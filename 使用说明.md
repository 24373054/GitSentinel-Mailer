# GitHub变更邮箱提示系统 - 使用说明

## 📋 目录
- [系统简介](#系统简介)
- [快速开始](#快速开始)
- [功能说明](#功能说明)
- [常见问题](#常见问题)
- [技术架构](#技术架构)

## 🎯 系统简介

这是一个完整的GitHub仓库监控系统，可以实时监控指定的GitHub仓库变更，并在检测到新提交时自动发送邮件通知。

### 主要特性

✅ **项目管理**
- 添加、编辑、删除监控项目
- 支持多个项目同时监控
- 数据持久化存储

✅ **智能监控**
- 每5分钟自动检查一次仓库变更
- 只推送新的提交信息
- 自动记录最后检查状态

✅ **邮件通知**
- 精美的HTML格式邮件
- 详细的提交信息（作者、时间、提交信息）
- 直接链接到GitHub查看详情

## 🚀 快速开始

### 方式一：使用安装脚本（推荐）

1. **安装依赖**
   ```bash
   双击运行 install.bat
   ```

2. **启动系统**
   ```bash
   双击运行 start-dev.bat
   ```

3. **访问系统**
   - 前端界面：http://localhost:3000
   - 后端API：http://localhost:5000

### 方式二：手动安装

1. **安装后端依赖**
   ```bash
   npm install
   ```

2. **安装前端依赖**
   ```bash
   cd client
   npm install
   cd ..
   ```

3. **启动后端服务器**
   ```bash
   npm run server
   # 或使用: node server/index.js
   ```

4. **启动前端（新开一个终端）**
   ```bash
   cd client
   npm start
   ```

5. **访问系统**
   - 打开浏览器访问 http://localhost:3000

## 📖 功能说明

### 1. 添加监控项目

1. 在左侧表单中填写信息：
   - **仓库地址**：格式为 `owner/repo`（例如：`facebook/react`）
   - **通知邮箱**：接收变更通知的邮箱地址

2. 点击"➕ 添加项目"按钮

3. 项目会出现在右侧项目列表中

### 2. 启动监控

1. 在项目列表中找到要监控的项目
2. 点击"▶️ 启动监控"按钮
3. 系统会立即检查一次仓库，并记录当前最新提交
4. 之后每5分钟自动检查一次

### 3. 接收邮件通知

当检测到新提交时，您会收到包含以下信息的邮件：
- 📦 仓库名称（带链接）
- 📝 提交SHA（带链接）
- 💬 提交信息
- 👤 提交者
- 🕐 提交时间

### 4. 编辑项目

1. 先停止项目监控
2. 点击"✏️ 编辑"按钮
3. 在表单中修改信息
4. 点击"💾 保存修改"

### 5. 删除项目

1. 先停止项目监控
2. 点击"🗑️ 删除"按钮
3. 确认删除操作

### 6. 停止监控

- 点击"⏸️ 停止监控"按钮即可停止对该项目的监控

## ❓ 常见问题

### Q: 为什么收不到邮件？

A: 请检查：
1. 邮箱地址是否正确
2. 查看垃圾邮件文件夹
3. 确认项目确实有新提交
4. 查看后端控制台是否有错误信息

### Q: 多久检查一次仓库？

A: 系统默认每5分钟检查一次。如需修改，请编辑 `server/monitorService.js` 中的 `MONITOR_INTERVAL` 常量。

### Q: 可以监控私有仓库吗？

A: 目前不支持。如需监控私有仓库，需要在 `server/monitorService.js` 中添加GitHub Token认证。

### Q: 支持哪些GitHub仓库格式？

A: 支持标准格式：`owner/repo`，例如：
- ✅ `facebook/react`
- ✅ `microsoft/vscode`
- ✅ `torvalds/linux`
- ❌ `https://github.com/facebook/react`

### Q: 数据存储在哪里？

A: 数据存储在项目根目录的 `github_monitor.db` SQLite数据库文件中。

### Q: 如何添加GitHub Token？

A: 编辑 `server/monitorService.js`，在axios请求中添加：
```javascript
headers: {
  'Authorization': `token YOUR_GITHUB_TOKEN`,
  'Accept': 'application/vnd.github.v3+json',
  'User-Agent': 'GitHub-Monitor-System'
}
```

### Q: 服务器重启后监控会继续吗？

A: 会的。系统启动时会自动恢复所有处于监控状态的项目。

### Q: 可以同时监控多少个项目？

A: 理论上没有限制，但请注意：
- GitHub API有速率限制（未认证：60次/小时）
- 建议使用GitHub Token提高限额（5000次/小时）

## 🛠️ 技术架构

### 后端技术栈
- **Node.js + Express**: RESTful API服务
- **SQLite**: 轻量级数据库
- **Axios**: HTTP客户端
- **Nodemailer**: 邮件发送
- **GitHub REST API**: 获取仓库信息

### 前端技术栈
- **React 18**: 用户界面
- **Axios**: API调用
- **CSS3**: 响应式设计

### 项目结构
```
github-monitor-system/
├── server/                 # 后端代码
│   ├── index.js           # Express服务器
│   ├── database.js        # 数据库操作
│   ├── monitorService.js  # 监控服务
│   └── emailService.js    # 邮件服务
├── client/                # 前端代码
│   ├── public/           # 静态文件
│   └── src/
│       ├── components/   # React组件
│       ├── services/     # API服务
│       ├── App.js        # 主应用
│       └── index.js      # 入口文件
├── package.json          # 后端依赖
├── install.bat           # 安装脚本
├── start-dev.bat         # 启动脚本
└── README.md            # 项目说明
```

## 📝 API接口

### 项目管理
- `GET /api/projects` - 获取所有项目
- `POST /api/projects` - 添加项目
- `PUT /api/projects/:id` - 更新项目
- `DELETE /api/projects/:id` - 删除项目

### 监控管理
- `POST /api/monitor/start/:id` - 启动监控
- `POST /api/monitor/stop/:id` - 停止监控
- `GET /api/monitor/status` - 获取监控状态

## 🔒 安全说明

1. **邮箱授权码**：已在代码中配置，请勿泄露
2. **数据安全**：数据库文件已添加到 `.gitignore`
3. **生产环境**：建议使用环境变量管理敏感信息

## 📧 邮件配置

当前使用的发件邮箱：
- 邮箱：2315766973@qq.com
- SMTP服务器：smtp.qq.com
- 端口：587

如需更换发件邮箱，请修改 `server/emailService.js` 中的 `EMAIL_CONFIG`。

## 🎨 界面预览

- 🎨 现代化渐变背景
- 📱 响应式设计，支持移动端
- 🎯 直观的操作界面
- ✨ 平滑的动画效果
- 🔔 实时状态显示

## 💡 使用建议

1. **首次使用**：建议先用小型仓库测试
2. **监控频率**：根据需求调整检查间隔
3. **邮件接收**：添加发件邮箱到白名单
4. **性能优化**：不要同时监控过多活跃仓库
5. **GitHub限制**：建议配置GitHub Token

## 🆘 获取帮助

如遇到问题，请检查：
1. Node.js版本（建议v14+）
2. 网络连接是否正常
3. GitHub API是否可访问
4. 后端控制台错误信息
5. 浏览器控制台错误信息

## 📌 注意事项

1. 首次启动监控时，只会记录当前最新提交，不会发送邮件
2. 只有检测到新提交时才会发送邮件通知
3. 监控中的项目无法编辑或删除，需先停止监控
4. 系统重启时会自动恢复监控状态
5. 邮件发送失败不会影响监控继续运行

## 🎉 开始使用

现在您可以开始使用系统了！添加您感兴趣的GitHub仓库，随时掌握项目动态！

